<?xml version="1.0" encoding="utf-16"?>
<ZL_OBJECT CHECKSUM="0468C9DAC6B730798262C56EB15BF91C" CODE_SIGNATURE="C8DF81750E9A64895A360E4242A01489" CONNECTOR="AAAD0A4B07A5A05AE1000000AC120173" NAME="YGPL_MT_TUTORIAL_CHANGE" TYPE="PROG" VERSION="1.0">
 <DIRECTORY DEVCLASS="YGPL-MULTITHREAD.TUTORIAL" MASTERLANG="E"/>
 <RAW>
  <A0_MAINDATA VARCL="X" SUBC="1" RMAND="060" RLOAD="E" FIXPT="X" UCCHECK="X"/>
  <SOURCE>`
*---------------------------------------------------------------------*
* Report  YGPL_MT_TUTORIAL
*---------------------------------------------------------------------*
**********************************************************************
* Author : Al&apos;oustad Taryck BENSIALI (taryck.bensiali@gmail.com)     *
* Date : 2008 December                                               *
**********************************************************************

REPORT  ygpl_mt_tutorial_change.

TABLES: ygpl_mt_workprocess_infos.

PARAMETERS :
  run_id    TYPE ygpl_mt_my_task=&gt;td_process_id OBLIGATORY.

SELECTION-SCREEN BEGIN OF BLOCK jobs WITH FRAME TITLE text-trj.
PARAMETERS:
  thread TYPE ygpl_mt_my_run=&gt;td_count DEFAULT 2 OBLIGATORY.
SELECT-OPTIONS:
  s_server FOR ygpl_mt_workprocess_infos-wp_server.   &quot; ygpl_mt_typespool=&gt;ts_wp_info-wp_server.
PARAMETERS:
  p_job_p TYPE ygpl_mt_typespool=&gt;td_priority.
SELECTION-SCREEN END OF BLOCK jobs.

SELECTION-SCREEN BEGIN OF BLOCK objs WITH FRAME TITLE text-tro.
PARAMETERS :
  p_b_rate TYPE ygpl_mt_typespool=&gt;td_batch_rate,
  mem_size TYPE ygpl_mt_my_run=&gt;td_memory_size DEFAULT 0.
SELECTION-SCREEN END OF BLOCK objs.

DATA o_run TYPE REF TO ygplimt_run.
DATA o_cond TYPE REF TO ygplimt_runconditions_4run.

AT SELECTION-SCREEN ON run_id.
  IF run_id IS INITIAL.
    MESSAGE text-obl TYPE &apos;E&apos;.
  ENDIF.

AT SELECTION-SCREEN.
  IF NOT o_run IS BOUND OR NOT o_cond IS BOUND.
    PERFORM load_run USING run_id.
    CLEAR run_id.
  ENDIF.
  IF run_id &lt;&gt; o_run-&gt;process_id .
    thread = o_cond-&gt;threads.
    s_server[] = o_cond-&gt;servers.
    p_job_p = o_cond-&gt;job_priority.
    p_b_rate = o_cond-&gt;batch_rate.
    mem_size = o_cond-&gt;maximum_memory.
    run_id = o_run-&gt;process_id.
  ENDIF.

START-OF-SELECTION.
  o_cond-&gt;set_threads( thread ).
  o_cond-&gt;set_servers( s_server[] ).
  o_cond-&gt;set_job_priority( p_job_p ).
  o_cond-&gt;set_batch_rate( p_b_rate ).
  o_cond-&gt;set_maximum_memory( mem_size ).
  o_run-&gt;send_conditions( o_cond ).
  WRITE:/ text-suc.
*&amp;---------------------------------------------------------------------*
*&amp;      Form  LOAD_RUN
*&amp;---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*      --&gt;P_RUN_ID  text
*----------------------------------------------------------------------*
FORM load_run  USING    p_run_id TYPE ygpl_mt_my_task=&gt;td_process_id.
  DATA o_cx TYPE REF TO ygpl_mt_cx.
  DATA msg  TYPE string.
  TRY.
      CLEAR o_cond.
      o_run ?= ygpl_mt_factories=&gt;get_run( run_id ).
      o_run-&gt;check_status( ).
      IF o_run-&gt;status &lt;&gt; o_run-&gt;system_status-process-started AND
         o_run-&gt;status &lt;&gt; o_run-&gt;system_status-process-in_progress.
        MESSAGE text-run TYPE &apos;E&apos;.
      ENDIF.
      o_cond ?= o_run-&gt;conditions.
    CATCH ygpl_mt_cx_process INTO o_cx.
      msg = o_cx-&gt;get_text( ).
      MESSAGE msg TYPE &apos;E&apos;.
  ENDTRY.
ENDFORM.                    &quot; LOAD_RUN</SOURCE>
  <TEXTSPOOL>
   <ITEM ID="I" KEY="OBL">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Field Mandatory" LENGTH="15 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="I" KEY="RUN">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Run is not running" LENGTH="18 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="I" KEY="SUC">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="New conditions send to Run." LENGTH="60 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="I" KEY="TRJ">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Jobs definitions" LENGTH="60 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="I" KEY="TRO">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="Object Blocs definitions" LENGTH="60 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="R">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="MT Tutorial : Change Run" LENGTH="24 "/>
     <ITEM LANGU="F" ENTRY="MT tutorial (test obj *_MT_TEMPLATE) - Traitement" LENGTH="49 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="MEM_SIZE">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Requested maximum memory size" LENGTH="37 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="OBJ_C">
    <TEXTS>
     <ITEM LANGU="F" ENTRY="        Nb d&apos;objet par temps d&apos;attente" LENGTH="38 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="P_B_RATE">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Batch Rate" LENGTH="18 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="P_JOB_P">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Job class" LENGTH="17 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="RUN_ID">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Parent Run ID" LENGTH="21 "/>
     <ITEM LANGU="F" ENTRY="D       ." LENGTH="9 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="S_SERVER">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Server Name" LENGTH="19 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="THREAD">
    <TEXTS>
     <ITEM LANGU="E" ENTRY="        Number of threads" LENGTH="25 "/>
    </TEXTS>
   </ITEM>
   <ITEM ID="S" KEY="WAIT_T">
    <TEXTS>
     <ITEM LANGU="F" ENTRY="        Temps d&apos;attente en S pour nb O" LENGTH="38 "/>
    </TEXTS>
   </ITEM>
  </TEXTSPOOL>
 </RAW>
</ZL_OBJECT>
